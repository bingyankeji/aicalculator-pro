# 房贷计算器国际化扩展计划

## 📌 当前状态

**v1.0** - 仅支持美国市场
- PMI 计算（首付 < 20%）
- 美国典型利率范围（6-7%）
- 财产税（Property Tax）
- HOA 费用
- 美国的 DTI 比率标准（28%/36%）

## 🌍 未来扩展方向

### 方案A：多地区选择器（推荐）

用户在计算器顶部选择国家/地区，系统自动应用对应规则：

```typescript
interface RegionConfig {
  country: string;
  currency: string;
  defaultInterestRate: number;
  loanTermOptions: number[];
  downPaymentRules: {
    minimum: number;
    pmiThreshold?: number; // 美国专有
    insuranceType?: string; // CMHC, etc.
  };
  taxRules: {
    hasPropertyTax: boolean;
    typicalRate?: number;
  };
  dtiRules: {
    frontEnd: number;
    backEnd: number;
  };
}
```

### 各地区配置示例

#### 🇺🇸 美国（已实现）
```typescript
const US_CONFIG: RegionConfig = {
  country: 'United States',
  currency: 'USD',
  defaultInterestRate: 6.5,
  loanTermOptions: [15, 20, 30],
  downPaymentRules: {
    minimum: 3,      // FHA loans
    pmiThreshold: 20, // PMI 消除阈值
  },
  taxRules: {
    hasPropertyTax: true,
    typicalRate: 1.5,
  },
  dtiRules: {
    frontEnd: 28,
    backEnd: 36,
  },
};
```

#### 🇨🇳 中国
```typescript
const CHINA_CONFIG: RegionConfig = {
  country: 'China',
  currency: 'CNY',
  defaultInterestRate: 4.2,
  loanTermOptions: [10, 20, 30],
  downPaymentRules: {
    minimum: 20,     // 首套房
    pmiThreshold: undefined, // 无 PMI
  },
  taxRules: {
    hasPropertyTax: false, // 暂无房产税
  },
  dtiRules: {
    frontEnd: 50,    // 月供不超过收入50%
    backEnd: 55,
  },
  specialRules: {
    firstHome: { minDownPayment: 20 },
    secondHome: { minDownPayment: 40 },
    thirdHome: { restricted: true },
  },
};
```

#### 🇨🇦 加拿大
```typescript
const CANADA_CONFIG: RegionConfig = {
  country: 'Canada',
  currency: 'CAD',
  defaultInterestRate: 5.5,
  loanTermOptions: [15, 20, 25, 30],
  downPaymentRules: {
    minimum: 5,      // CMHC insured
    pmiThreshold: 20,
    insuranceType: 'CMHC', // 不是 PMI，是 CMHC
  },
  taxRules: {
    hasPropertyTax: true,
    typicalRate: 1.0,
  },
  dtiRules: {
    frontEnd: 32,
    backEnd: 40,
  },
};
```

#### 🇬🇧 英国
```typescript
const UK_CONFIG: RegionConfig = {
  country: 'United Kingdom',
  currency: 'GBP',
  defaultInterestRate: 5.0,
  loanTermOptions: [15, 20, 25, 30, 35],
  downPaymentRules: {
    minimum: 5,      // 95% LTV mortgages
    pmiThreshold: undefined, // 不同的保险结构
  },
  taxRules: {
    hasPropertyTax: false, // Council Tax separate
  },
  dtiRules: {
    frontEnd: 30,
    backEnd: 45,
  },
};
```

## 🔧 技术实现步骤

### 1. 创建地区配置系统
```typescript
// lib/mortgage/region-configs.ts
export const REGION_CONFIGS: { [key: string]: RegionConfig } = {
  us: US_CONFIG,
  cn: CHINA_CONFIG,
  ca: CANADA_CONFIG,
  uk: UK_CONFIG,
  // ... 更多地区
};
```

### 2. 修改计算器组件
```typescript
const [selectedRegion, setSelectedRegion] = useState<string>('us');
const regionConfig = REGION_CONFIGS[selectedRegion];

// 根据地区配置动态计算
const calculateMortgage = (): MortgageResult => {
  const config = regionConfig;
  
  // 动态决定是否计算 PMI
  const pmi = config.downPaymentRules.pmiThreshold 
    ? calculatePMI(...)
    : 0;
    
  // 动态决定是否包含财产税
  const propertyTax = config.taxRules.hasPropertyTax
    ? inputs.propertyTax / 12
    : 0;
    
  // ...
};
```

### 3. UI 调整
- 添加地区选择下拉菜单
- 根据地区显示/隐藏字段
  - PMI（仅美国）
  - CMHC（仅加拿大）
  - Property Tax（美国、加拿大）
- 货币符号自动切换（$, ¥, £, €）

### 4. 智能分析调整
- DTI 比率根据地区标准调整
- 风险评估规则本地化
- 建议内容本地化

## 📊 优先级

### Phase 1: 明确美国市场 ✅
- [x] 标注 🇺🇸 US Mortgage
- [x] PMI 说明添加"US Policy"
- [x] 添加国际用户提示
- [x] 更新 SEO 元数据

### Phase 2: 添加中国市场 🎯
- [ ] 中国房贷配置
- [ ] 首套/二套房规则
- [ ] 人民币显示
- [ ] 本地化术语（月供、首付、贷款）

### Phase 3: 多地区支持
- [ ] 地区选择器 UI
- [ ] 自动货币切换
- [ ] 动态字段显示/隐藏
- [ ] 地区特定规则引擎

### Phase 4: 深度本地化
- [ ] 各地区的具体银行利率数据
- [ ] 地区特定税收政策
- [ ] 本地语言支持
- [ ] 地区监管合规说明

## 💡 SEO 策略

### 多地区页面策略

**选项 1：单页面 + 地区选择器**
- URL: `/mortgage-calculator`
- 默认美国，可切换其他地区
- 简单，维护成本低

**选项 2：独立页面（推荐）**
- `/us-mortgage-calculator` 🇺🇸
- `/china-mortgage-calculator` 🇨🇳
- `/canada-mortgage-calculator` 🇨🇦
- `/uk-mortgage-calculator` 🇬🇧

**优势：**
- ✅ 更好的 SEO（精确关键词）
- ✅ 本地化内容更深入
- ✅ 加载速度更快（按需）
- ✅ 更容易针对性营销

## 🔐 政策合规

不同地区的金融计算器可能需要：
- 免责声明（Disclaimer）
- 监管机构批准（某些国家）
- 数据隐私合规（GDPR, CCPA）
- 金融建议免责（不构成投资建议）

## 📝 下一步行动

1. **确定目标市场优先级**
   - 基于用户来源数据
   - 基于市场规模
   - 基于竞争难度

2. **收集各地区准确数据**
   - 典型利率范围
   - 首付要求
   - 税收政策
   - 银行规则

3. **咨询法律/金融专家**
   - 确保计算准确性
   - 符合监管要求
   - 免责声明合规

4. **开发测试**
   - 先开发一个新地区（如中国）
   - 测试多地区架构
   - 收集用户反馈
   - 迭代优化

## 🎯 成功指标

- 各地区用户留存率
- 计算器使用次数
- 地区特定 SEO 排名
- 用户满意度反馈
- 转化率（如果有商业化）

