# AI 计算器项目 - 开发前必看

> 新开发者必读文档 - 项目介绍、开发进度、注意事项和规范

---

## 🎯 项目介绍

### 项目概述
**AI 计算器**是一个基于 Next.js 14 的专业计算器平台，提供 250+ 种在线计算工具，涵盖金融、健康、数学、日期时间等多个领域。

### 核心特色
- **智能分析引擎**：基于规则的专家系统，提供个性化建议和风险评估
- **SEO 优先**：每个页面都经过深度 SEO 优化，目标 Lighthouse 90+ 分
- **响应式设计**：移动端优先，完美适配所有设备
- **专业 UI**：统一的蓝灰配色方案，简洁专业的用户界面

### 技术栈
- **前端**：Next.js 14 + TypeScript + Tailwind CSS
- **组件库**：Radix UI + Lucide Icons
- **图表**：Recharts
- **状态管理**：React Hooks + Zustand
- **部署**：Vercel（推荐）

---

## 📊 开发进度总览

### 当前状态
- **总体完成度**：约 98%
- **已完成计算器**：41个专业计算器
- **SEO 评分**：95-100/100（均达生产标准）

### 完成的核心模块
- ✅ **基础架构**（100%）- Next.js 14 + TypeScript 配置完成
- ✅ **UI 组件**（85%）- Header, Footer, Sidebar 等核心组件
- ✅ **基础计算器**（100%）- 科学计算器 + 历史记录系统
- ✅ **标准开发模板**（100%）- 基于 Mortgage Calculator 经验
- ✅ **SEO 优化**（99%）- 25+ 项 SEO 最佳实践
- ✅ **智能分析引擎**（50%）- DTI/营养/税务分析已复用

### 开发效率记录
- **标准计算器**：1-2小时（模板成熟）
- **复杂计算器**：1-2天（含智能分析）
- **SEO 内容**：2-3小时（1500+ 字专业内容）

---

## ⚠️ 开发注意事项

### 🔥 重要禁止事项

#### 1. UI/UX 禁止事项
```tsx
// ❌ 禁止在计算器组件内添加顶部介绍框
export function CalculatorComponent() {
  return (
    <div>
      {/* ❌ 禁止这样做！占据空间，体验不好 */}
      <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
        <h2>Calculator Name</h2>
        <p>Calculate your...</p>
      </div>
    </div>
  );
}

// ✅ 正确做法：直接开始计算器内容
export function CalculatorComponent() {
  return (
    <div className="bg-white rounded-xl shadow-lg p-6">
      <h3 className="text-lg font-bold mb-4">Input Section</h3>
      {/* 输入字段 */}
    </div>
  );
}
```

#### 2. 键盘事件处理安全规范
```typescript
// ❌ 错误写法（会导致运行时错误）
if (e.key.toLowerCase() === 'c') {
  // 如果 e.key 是 undefined，会报错
}

// ✅ 正确写法（使用可选链操作符）
if (e.key?.toLowerCase() === 'c') {
  // 即使 e.key 是 undefined，也不会报错
}
```

### 🚨 常见错误预防

#### 代码审查清单
- [ ] 所有 `.toLowerCase()` 前都使用 `?.`
- [ ] 所有 `.toUpperCase()` 前都使用 `?.`
- [ ] 所有数组/对象访问都考虑了 undefined 情况
- [ ] 键盘事件处理中检查 `e.key` 的存在性

#### SEO 常见错误
- ❌ 忘记 sr-only H1 标签
- ❌ 结构化数据语法错误
- ❌ FAQ 没有 microdata 标记
- ❌ 内部链接缺失
- ❌ Canonical URL 使用相对路径
- ❌ OpenGraph 缺少 siteName

---

## 📋 标准开发流程

### 新计算器开发必须步骤

#### 1. 创建文件
```
✅ 必需文件：
├── app/[calculator-name]/page.tsx          # 主页面文件
├── components/Calculator/[Name]Calculator.tsx  # 计算器组件
└── lib/calculatorData.ts                   # 更新搜索数据源
```

#### 2. 更新链接（⚠️ 非常重要！）
**每开发一个新计算器，必须同步更新3个位置：**

1. **`app/calculators/page.tsx`** - All Calculator Tools页面
2. **`app/[category]/page.tsx`** - 对应分类页面
3. **`lib/calculatorData.ts`** - 搜索数据源

```typescript
// lib/calculatorData.ts 示例
{ 
  name: 'Calculator Name', 
  url: '/calculator-name', 
  keywords: ['关键词1', '关键词2', '关键词3'], 
  category: 'Math', 
  icon: '📊' 
}
```

#### 3. 验证检查
- [ ] 首页搜索框能搜索到新计算器
- [ ] All Calculator Tools页面搜索框能搜索到新计算器
- [ ] 3个位置的链接都能正确跳转
- [ ] 面包屑导航指向正确

---

## 🎨 UI 设计规范

### 配色规范
```css
/* 主色调 */
--primary-blue: #3b82f6;      /* 主蓝色 */
--primary-gray: #6b7280;      /* 主灰色 */
--success-green: #10b981;     /* 成功绿色 */
--warning-amber: #f59e0b;     /* 警告橙色 */
--error-red: #ef4444;         /* 错误红色 */

/* 背景色 */
--bg-gradient: from-gray-50 to-white;  /* 页面背景渐变 */
--card-bg: #ffffff;           /* 卡片背景 */
--input-bg: #f9fafb;         /* 输入框背景 */
```

### 布局标准
```tsx
// 容器宽度
<div className="container mx-auto px-4">     // 全宽容器
<div className="max-w-6xl mx-auto">          // 内容区域
<div className="max-w-4xl mx-auto">          // 文本内容

// 间距系统
py-8 md:py-12   // 区域上下间距
mb-8            // 标题下间距
gap-6           // 网格间距
space-y-6       // 垂直堆叠间距
```

### 组件设计原则
1. **简洁优于复杂** - 去除不必要的装饰
2. **功能优于美观** - 确保可用性第一
3. **一致性** - 统一的配色和间距
4. **响应式** - 移动端优先设计

---

## 💻 代码质量规范

### TypeScript 类型定义
```typescript
// 输入接口
interface CalculatorInputs {
  field1: number;
  field2: number;
  field3?: string;  // 可选
}

// 结果接口
interface CalculationResult {
  mainResult: number;
  breakdown: {
    item1: number;
    item2: number;
  };
  analysis?: AnalysisResult;  // 智能分析
}

// 智能分析接口
interface AnalysisResult {
  rating: 'excellent' | 'good' | 'fair' | 'poor';
  risks: Risk[];
  recommendations: string[];
}
```

### 状态管理模式
```typescript
// 使用 useState
const [inputs, setInputs] = useState<CalculatorInputs>({
  field1: defaultValue1,
  field2: defaultValue2,
});

const [result, setResult] = useState<CalculationResult | null>(null);
```

### 表单验证
```typescript
const validate = (): boolean => {
  if (inputs.field1 <= 0) {
    alert("Field1 must be positive");
    return false;
  }
  return true;
};

const handleCalculate = () => {
  if (!validate()) return;
  const result = calculate(inputs);
  setResult(result);
};
```

---

## 🔍 SEO 优化要求

### 页面结构必需元素（按顺序）

#### 1. Metadata 配置
```typescript
export const metadata: Metadata = {
  title: "主标题 - 副标题 | AICalculator",
  description: "155字符描述，包含主关键词和CTA",
  keywords: ["主关键词", "长尾词1", "长尾词2"],
  openGraph: {
    title: "社交媒体标题",
    description: "社交媒体描述",
    type: "website",
    url: "https://aicalculator.com/calculator-name",  // 绝对URL
    siteName: "AICalculator",
  },
  alternates: {
    canonical: "https://aicalculator.com/calculator-name",  // 绝对URL
  },
  robots: {
    index: true,
    follow: true,
  },
};
```

#### 2. 结构化数据（必需4种）
- **WebApplication** - 应用程序信息
- **BreadcrumbList** - 面包屑导航
- **FAQPage** - FAQ 问答
- **HowTo** - 使用指南

#### 3. 页面内容要求
- **隐藏 H1 标签**：`<h1 className="sr-only">完整标题</h1>`
- **面包屑导航**：三层级结构（Home / Category / Calculator）
- **教育内容**：最少 1500 字专业内容
- **FAQ 部分**：至少 5 个问答，带 microdata 标记
- **内部链接**：至少 3 个相关计算器链接

---

## ✅ 部署前检查清单

### 代码质量
- [ ] 无 TypeScript 错误
- [ ] 无 Lint 警告
- [ ] 键盘事件处理使用可选链（`?.`）

### SEO 检查
- [ ] 所有链接可点击（无 `#` 链接）
- [ ] 图片都有 alt 标签
- [ ] 面包屑导航正确
- [ ] Meta 标签完整
- [ ] 结构化数据通过验证

### 内容检查
- [ ] FAQ 至少 5 个
- [ ] 内容至少 1500 字
- [ ] 内部链接至少 3 个

### 功能检查
- [ ] 移动端完美显示
- [ ] 搜索功能测试通过
- [ ] 分享功能正常
- [ ] 计算结果准确

### 性能检查
- [ ] Lighthouse 分数 90+
- [ ] 页面加载速度 < 3 秒
- [ ] 图片优化（WebP 格式）

---

## 🛠️ 开发工具和资源

### 必备工具
- **Rich Results Test** - 结构化数据验证
- **Schema Validator** - Schema.org 验证
- **PageSpeed Insights** - 性能测试
- **Mobile-Friendly Test** - 移动端测试
- **Lighthouse** - 综合评分

### 参考文档
- **Schema.org 文档**：https://schema.org/
- **Google SEO 指南**：https://developers.google.com/search/docs
- **Next.js Metadata**：https://nextjs.org/docs/app/building-your-application/optimizing/metadata

### 开发时间估算
- **标准计算器页面**：
  - Day 1：页面结构 + Metadata（2小时）+ 计算器组件开发（4小时）
  - Day 2：智能分析组件（3小时）+ SEO内容撰写（3小时）
  - Day 3（可选）：优化、测试、修复（4-6小时）

- **复杂计算器（如 Mortgage）**：
  - Day 1-2：核心功能
  - Day 3：智能分析
  - Day 4：SEO 优化
  - Day 5：测试和完善

---

## 💡 最佳实践总结

### 开发经验
1. **SEO 优先** - 从第一行代码开始就考虑 SEO
2. **结构化数据至关重要** - 4种 Schema 带来巨大 SEO 价值
3. **内容质量 > 数量** - 1500字精品内容胜过5000字水文
4. **移动端优先** - 所有设计决策先考虑移动端
5. **性能不可妥协** - 每个优化都要经过 Lighthouse 验证
6. **用户体验第一** - 简洁 > 复杂，直观 > 炫酷
7. **代码质量 100%** - 零容忍 Lint 错误
8. **可复用组件** - 智能分析组件可复用到其他计算器

### 项目核心策略
- **智能化方向**：基于规则的专家系统（非 LLM）
- **零运营成本**：无需 API 费用，毫秒级响应
- **差异化价值**：传统计算器 + 智能分析 = 独特价值
- **SEO 第一优先级**：所有开发必须遵循 SEO 最佳实践

---

## 🚀 开始开发

### 快速启动
1. **克隆项目**：`git clone [repository]`
2. **安装依赖**：`npm install`
3. **启动开发服务器**：`npm run dev`
4. **选择计算器**：参考功能开发清单选择优先级高的计算器
5. **遵循标准模板**：严格按照本文档的开发流程和规范

### 获得帮助
- 参考已完成的计算器代码（如 Mortgage Calculator）
- 查看 `docs/` 目录下的详细开发文档
- 遵循本文档的所有规范和检查清单

---

**祝开发顺利！记住：质量第一，SEO 优先，用户体验至上。** 🎯
