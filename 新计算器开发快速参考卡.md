# 新计算器开发快速参考卡

> **快速上手 | 核心要点 | 1页纸指南**  
> **预计开发时间：** 1-2小时（熟练后）

---

## 🚀 5步开发流程

```
1. 创建组件 → 2. 创建页面 → 3. 更新数据库 → 4. 测试 → 5. 部署
   (30分钟)      (45分钟)       (15分钟)      (30分钟)
```

---

## 📁 必须创建/修改的文件

| 序号 | 文件 | 说明 |
|-----|------|------|
| 1️⃣ | `components/Calculator/YourCalculator.tsx` | 计算器组件 |
| 2️⃣ | `app/your-calculator/page.tsx` | 页面文件（SEO） |
| 3️⃣ | `lib/calculatorData.ts` | 搜索数据库 ⚠️必改 |
| 4️⃣ | `app/calculators/page.tsx` | All计算器列表 ⚠️必改 |
| 5️⃣ | `app/[category]/page.tsx` | 分类页面 ⚠️必改 |

---

## 🔑 核心代码模板

### 组件必需导入

```typescript
import { useState, useRef } from 'react';
import html2canvas from 'html2canvas';
import { ShareModal } from '@/components/ShareModal';
import { useShare } from '@/hooks/useShare';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
```

### 分享功能（3行搞定）

```typescript
const { showShareModal, shareUrl, shareText, handleShare, closeShareModal } = useShare({
  calculatorPath: '/your-calculator',
  getShareParams: () => ({ v1: inputs.value1.toString() }),
  getShareText: () => result ? `Result: ${result.value}` : 'Check this out!',
});
```

### 页面必需导入

```typescript
import type { Metadata } from 'next';
import { CalculatorBreadcrumb } from '@/components/CalculatorBreadcrumb';
import { YourCalculator } from '@/components/Calculator/YourCalculator';
```

### URL配置（禁止硬编码）

```typescript
import { getUrl, getOgImage } from '@/config/site';

// ✅ 正确
url: getUrl('/your-calculator'),
image: getOgImage('your-calculator'),

// ❌ 错误
url: 'https://aicalculator.pro/your-calculator',
```

---

## ✅ 必做检查清单（提交前）

### 功能完整性

- [ ] ✅ 计算功能正常（3+测试用例）
- [ ] ✅ 分享按钮（useShare Hook + ShareModal）
- [ ] ✅ 保存图片按钮（html2canvas）
- [ ] ✅ 打印按钮
- [ ] ✅ 结果区域有 `ref={resultRef}`

### SEO优化

- [ ] ✅ 隐藏H1（`<h1 className="sr-only">`）
- [ ] ✅ 面包屑导航（`<CalculatorBreadcrumb />`）
- [ ] ✅ 5个Schema（WebApp, Breadcrumb, FAQ, HowTo, Article）
- [ ] ✅ 5-6个FAQ（总字数800-1000）
- [ ] ✅ 教育内容（1500+字）
- [ ] ✅ 3-5个权威外链（.gov/.edu）
- [ ] ✅ 4-8个内部链接

### 数据同步

- [ ] ✅ 添加到 `lib/calculatorData.ts`（8-12个关键词）
- [ ] ✅ 更新 `app/calculators/page.tsx`
- [ ] ✅ 更新分类页面（`app/[category]/page.tsx`）
- [ ] ✅ 首页搜索能找到
- [ ] ✅ All Calculators页面搜索能找到

### UI/响应式

- [ ] ✅ 配色统一（蓝灰色系）
- [ ] ✅ 按钮 ≥ 44px高度
- [ ] ✅ 移动端测试（375px、768px、1920px）
- [ ] ✅ 表格可水平滚动
- [ ] ✅ 无水平页面滚动

### 性能测试

- [ ] ✅ PageSpeed Insights > 90分
- [ ] ✅ Rich Results Test通过
- [ ] ✅ 移动友好测试通过

---

## ⚠️ 8大常见错误（必须避免）

| # | 错误 | 正确做法 |
|---|------|---------|
| 1 | 硬编码URL | 使用 `getUrl()` |
| 2 | 忘记更新搜索库 | 同步更新3个文件 |
| 3 | 面包屑路径错误 | `/financial`（不是`/financial-calculators`） |
| 4 | 缺少分享功能 | 使用 `useShare` Hook |
| 5 | FAQ过长 | 每个150-200字 |
| 6 | 组件内加介绍框 | 不要加！SEO靠sr-only H1 |
| 7 | 键盘事件无保护 | 使用 `e.key?.toLowerCase()` |
| 8 | 移动端未测试 | 3个尺寸都要测 |

---

## 🎨 UI配色标准

```typescript
// ✅ 使用这些
'bg-blue-600'           // 按钮
'bg-gray-50'            // 背景
'text-gray-900'         // 标题
'border-gray-200'       // 边框

// ❌ 避免这些
'bg-purple-600'         // 紫色
'bg-pink-600'           // 粉色
'bg-orange-600'         // 橙色（除非警告）
```

---

## 🔍 SEO结构化数据模板

```typescript
const structuredData = {
  '@context': 'https://schema.org',
  '@graph': [
    { '@type': 'WebApplication', ... },      // 1️⃣ 必需
    { '@type': 'BreadcrumbList', ... },      // 2️⃣ 必需
    { '@type': 'FAQPage', ... },             // 3️⃣ 必需
    { '@type': 'HowTo', ... },               // 4️⃣ 必需
    { '@type': 'Article', ... },             // 5️⃣ 必需
  ]
};
```

---

## 📊 分类路径映射

| 分类 | 正确URL | 错误URL ❌ |
|-----|---------|-----------|
| Financial | `/financial` | `/financial-calculators` |
| Health | `/health-fitness` | `/health` |
| Math | `/math-numbers` | `/math` |
| Other | `/other` | `/others` |

---

## 🛠️ 测试工具

| 工具 | URL | 用途 |
|-----|-----|------|
| Rich Results Test | https://search.google.com/test/rich-results | 验证Schema |
| Mobile-Friendly Test | https://search.google.com/test/mobile-friendly | 移动端 |
| PageSpeed Insights | https://pagespeed.web.dev/ | 性能 |

---

## 📖 最佳参考示例

**BMI Calculator** - 100分标准
- 页面：`app/bmi-calculator/page.tsx`（795行）
- 组件：`components/Calculator/BMICalculator.tsx`（1340行）
- 特点：完整SEO、10个FAQ、智能分析、权威链接

**复制它！** 把它作为模板，修改计算逻辑即可。

---

## ⚡ 快速命令

```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 运行Lint检查
npm run lint

# 快速启动（Windows）
双击：快速启动.bat
```

---

## 🎯 时间分配建议

| 任务 | 时间 | 说明 |
|-----|-----|------|
| 创建组件 | 30分钟 | 复制BMI Calculator模板 |
| 创建页面 | 45分钟 | 元数据+Schema+教育内容 |
| 更新数据库 | 15分钟 | 3个文件同步更新 |
| 功能测试 | 20分钟 | 计算+分享+保存+打印 |
| SEO测试 | 10分钟 | Rich Results + 移动友好 |
| 响应式测试 | 10分钟 | 3个屏幕尺寸 |
| **总计** | **2小时10分钟** | 熟练后可压缩到1小时 |

---

## 🚨 紧急救命Tips

### 代码不工作？

1. **检查导入** - 是否导入了所有必需组件？
2. **检查类型** - TypeScript类型是否匹配？
3. **查看控制台** - 浏览器F12看错误信息
4. **参考BMI** - 对比BMI Calculator的代码

### 搜索找不到？

1. 检查 `lib/calculatorData.ts` 是否添加
2. 检查关键词是否正确
3. 检查URL是否正确（3个地方同步）
4. 清除缓存重试

### SEO测试不通过？

1. 检查所有URL是否绝对路径
2. 检查Schema是否嵌套在 `@graph` 中
3. 检查FAQ是否有microdata标记
4. 使用Rich Results Test查看具体错误

---

## 💡 一句话总结

**复制BMI Calculator → 改计算逻辑 → 更新3个数据库文件 → 测试 → 完成！**

---

**需要更多帮助？** 阅读完整指南：`新计算器开发完整指南.md`

**项目规范？** 阅读：`CLAUDE.md`

**开发清单？** 阅读：`功能开发清单.md`

---

**祝开发顺利！🚀**

