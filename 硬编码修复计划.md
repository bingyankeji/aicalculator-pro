# 硬编码URL修复计划

> **策略：** 每次修复2个页面，逐步推进  
> **总页面：** 62个（不含系统页面5个，共67个）  
> **总批次：** 31批次（计算器） + 3批次（系统页面）  
> **预计时间：** 每批10分钟，总计约6小时  
> **当前进度：** 33/62 已完成 (53.2%) 🎉 **健康类全部完成！**  
> **最近更新：** 2025-11-19 - 完成第17批

---

## 📋 修复流程（标准化）

### 每个页面的修复步骤：

1. **打开文件**
2. **在顶部添加导入**（如果没有）：
   ```typescript
   import { getUrl, getOgImage } from '@/config/site';
   ```
3. **修复6处硬编码**：
   - `metadata.openGraph.url` → `getUrl('/xxx')`
   - `metadata.alternates.canonical` → `getUrl('/xxx')`
   - `structuredData.WebApplication.url` → `getUrl('/xxx')`
   - `structuredData.BreadcrumbList[0].item` → `getUrl('/')`
   - `structuredData.BreadcrumbList[1].item` → `getUrl('/category')`
   - `structuredData.BreadcrumbList[2].item` → `getUrl('/xxx')`
4. **保存文件**
5. **测试验证**（npm run dev）

---

## 🎯 分批修复计划

### 第1批（金融类 1-2）✅ 已完成
- [x] `app/age-calculator/page.tsx` (6处) ✅
- [x] `app/average-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 2/62 (3%)  
**完成时间：** 2024-11-19

---

### 第2批（金融类 3-4）✅ 已完成
- [x] `app/boat-loan-calculator/page.tsx` (6处) ✅
- [x] `app/breakeven-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 4/62 (6%)  
**完成时间：** 2024-11-19

---

### 第3批（金融类 5-6）✅ 已完成
- [x] `app/budget-calculator/page.tsx` (6处) ✅
- [x] `app/business-loan-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 6/62 (10%)  
**完成时间：** 2024-11-19

---

### 第4批（金融类 7-8）✅ 已完成
- [x] `app/cash-back-calculator/page.tsx` (6处) ✅
- [x] `app/debt-payoff-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 8/62 (13%)  
**完成时间：** 2024-11-19

---

### 第5批（金融类 9-10）✅ 已完成
- [x] `app/discount-calculator/page.tsx` (16处) ✅ 特殊：多于6处
- [x] `app/emi-calculator/page.tsx` (6处) ✅

**预计耗时：** 15分钟  
**累计进度：** 10/62 (16%)  
**完成时间：** 2024-11-19

---

### 第6批（金融类 11-12）✅ 已完成
- [x] `app/home-loan-calculator/page.tsx` (11处) ✅ 特殊：多于6处
- [x] `app/ira-calculator/page.tsx` (22处) ✅ 特殊：最多硬编码

**预计耗时：** 20分钟  
**累计进度：** 12/62 (19%)  
**完成时间：** 2024-11-19

---

### 第7批（金融类 13-14）✅ 已完成
- [x] `app/lease-calculator/page.tsx` (6处) ✅
- [x] `app/marriage-tax-calculator/page.tsx` (15处) ✅ 特殊：多于6处

**预计耗时：** 15分钟  
**累计进度：** 14/62 (23%)  
**完成时间：** 2024-11-19

---

### 第8批（金融类 15-16）✅ 已完成
- [x] `app/mortgage-calculator-uk/page.tsx` (6处) ✅
- [x] `app/mortgage-payoff-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 16/62 (26%)  
**完成时间：** 2024-11-19

---

### 第9批（金融类 17-18）✅ 已完成
- [x] `app/payment-calculator/page.tsx` (6处) ✅
- [x] `app/pay-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 18/62 (29%)  
**完成时间：** 2024-11-19

---

### 第10批（金融类 19-20）✅ 已完成
- [x] `app/present-value-calculator/page.tsx` (6处) ✅
- [x] `app/refinance-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 20/62 (32%)  
**完成时间：** 2024-11-19

---

### 第11批（金融类 21-22）✅ 已完成 🏆 **金融类完成！**
- [x] `app/roi-calculator/page.tsx` (6处) ✅
- [x] `app/salary-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 22/62 (35%) ✅ **金融类全部完成！**  
**完成时间：** 2024-11-19

---

### 第12批（健康类 1-2）✅ 已完成
- [x] `app/bmi-calculator/page.tsx` (6处) ✅
- [x] `app/bmr-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 24/62 (39%)  
**完成时间：** 2024-11-19

---

### 第13批（健康类 3-4）✅ 已完成
- [x] `app/body-fat-calculator/page.tsx` (6处) ✅
- [x] `app/calorie-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 26/62 (42%)  
**完成时间：** 2024-11-19

---

### 第14批（健康类 5-6）
- [x] `app/ideal-weight-calculator/page.tsx` (6处) ✅
- [x] `app/macro-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 28/62 (45%)
**完成时间：** 2025-11-19

---

### 第15批（健康类 7-8）
- [x] `app/pace-calculator/page.tsx` (6处) ✅
- [x] `app/pregnancy-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 30/62 (48%)
**完成时间：** 2025-11-19

---

### 第16批（健康类 9-10）
- [x] `app/protein-calculator/page.tsx` (6处) ✅
- [x] `app/weight-calculator/page.tsx` (6处) ✅

**预计耗时：** 10分钟  
**累计进度：** 32/62 (52%)
**完成时间：** 2025-11-19

---

### 第17批（健康类 11）✅ 已完成
- [x] `app/height-calculator/page.tsx` (15处) ✅ ⚠️ 特殊：多于6处

**预计耗时：** 10分钟  
**累计进度：** 33/62 (53%) ✅ **健康类全部完成！**
**完成时间：** 2025-11-19

---

### 第18批（数学类 1-2）
- [ ] `app/area-calculator/page.tsx` (6处)
- [ ] `app/circle-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 35/62 (56%)

---

### 第19批（数学类 3-4）
- [ ] `app/fraction-calculator/page.tsx` (6处)
- [ ] `app/gpa-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 37/62 (60%)

---

### 第20批（数学类 5-6）
- [ ] `app/grade-calculator/page.tsx` (6处)
- [ ] `app/graphing-calculator/page.tsx` (10处) ⚠️ 特殊：多于6处

**预计耗时：** 12分钟  
**累计进度：** 39/62 (63%)

---

### 第21批（数学类 7-8）
- [ ] `app/percentage-calculator/page.tsx` (6处)
- [ ] `app/pythagorean-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 41/62 (66%)

---

### 第22批（数学类 9-10）
- [ ] `app/quadratic-formula-calculator/page.tsx` (2处) ⚠️ 特殊：较少硬编码
- [ ] `app/scientific-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 43/62 (69%)

---

### 第23批（数学类 11-12）
- [ ] `app/square-footage-calculator/page.tsx` (6处)
- [ ] `app/square-root-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 45/62 (73%)

---

### 第24批（数学类 13-14）
- [ ] `app/standard-deviation-calculator/page.tsx` (6处)
- [ ] `app/statistics-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 47/62 (76%)

---

### 第25批（数学类 15-16）
- [ ] `app/triangle-calculator/page.tsx` (6处)
- [ ] `app/volume-calculator/page.tsx` (6处)

**预计耗时：** 10分钟  
**累计进度：** 49/62 (79%)

---

### 第26批（数学类 17）
- [ ] `app/roman-numeral-converter/page.tsx` (12处) ⚠️ 特殊：多于6处

**预计耗时：** 10分钟  
**累计进度：** 50/62 (81%) ✅ **数学类完成！**

---

### 第27批（时间/工具类 1-2）
- [ ] `app/date-calculator/page.tsx` (6处)
- [ ] `app/day-counter/page.tsx` (15处) ⚠️ 特殊：多于6处

**预计耗时：** 12分钟  
**累计进度：** 52/62 (84%)

---

### 第28批（时间/工具类 3-4）
- [ ] `app/day-of-week-calculator/page.tsx` (15处) ⚠️ 特殊：多于6处
- [ ] `app/password-generator/page.tsx` (12处) ⚠️ 特殊：多于6处

**预计耗时：** 15分钟  
**累计进度：** 54/62 (87%)

---

### 第29批（时间/工具类 5-6）
- [ ] `app/time-calculator/page.tsx` (6处)
- [ ] `app/time-zone-calculator/page.tsx` (15处) ⚠️ 特殊：多于6处

**预计耗时：** 12分钟  
**累计进度：** 56/62 (90%)

---

### 第30批（时间/工具类 7）
- [ ] `app/tip-calculator/page.tsx` (6处)

**预计耗时：** 5分钟  
**累计进度：** 57/62 (92%) ✅ **时间/工具类完成！**

---

### 🔧 系统页面修复（单独处理）

### 第31批（系统页面 1-2）
- [ ] `app/page.tsx` (首页，11处)
- [ ] `app/financial/page.tsx` (3处)

**预计耗时：** 10分钟  
**累计进度：** 59/67 (88%)

---

### 第32批（系统页面 3-4）
- [ ] `app/health-fitness/page.tsx` (3处)
- [ ] `app/math-numbers/page.tsx` (3处)

**预计耗时：** 10分钟  
**累计进度：** 61/67 (91%)

---

### 第33批（系统页面 5-7）
- [ ] `app/quadratic-formula-calculator/structuredData.ts` (4处)
- [ ] `app/layout.tsx` (3处)
- [ ] `app/robots.ts` (1处)

**预计耗时：** 10分钟  
**累计进度：** 64/67 (96%)

---

### 第34批（系统页面最后）
- [ ] `app/sitemap.ts` (1处)

**预计耗时：** 5分钟  
**累计进度：** 65/67 (97%)

---

## 📊 进度追踪统计

| 分类 | 数量 | 批次范围 | 状态 |
|------|------|---------|------|
| 金融类 | 22个 | 第1-11批 | ⬜️ 待开始 |
| 健康类 | 11个 | 第12-17批 | ⬜️ 待开始 |
| 数学类 | 17个 | 第18-26批 | ⬜️ 待开始 |
| 时间/工具类 | 7个 | 第27-30批 | ⬜️ 待开始 |
| 系统页面 | 8个 | 第31-34批 | ⬜️ 待开始 |
| **总计** | **65个** | **34批次** | **0/65完成** |

---

## ⚠️ 特别注意

### 硬编码数量较多的文件（需要额外时间）

1. **ira-calculator** (22处) - 第6批
2. **discount-calculator** (16处) - 第5批
3. **marriage-tax-calculator** (15处) - 第7批
4. **height-calculator** (15处) - 第17批
5. **day-counter** (15处) - 第27批
6. **day-of-week-calculator** (15处) - 第28批
7. **time-zone-calculator** (15处) - 第29批
8. **password-generator** (12处) - 第28批
9. **roman-numeral-converter** (12处) - 第26批
10. **home-loan-calculator** (11处) - 第6批
11. **page.tsx首页** (11处) - 第31批
12. **graphing-calculator** (10处) - 第20批

---

## 🎯 里程碑

- 🏁 **25%完成** - 第8批完成后（16个文件）
- 🏁 **50%完成** - 第16批完成后（32个文件）
- 🏁 **75%完成** - 第24批完成后（47个文件）
- 🏁 **100%完成** - 第34批完成后（65个文件）

---

## ✅ 验证检查

每完成5批次后，运行验证：

```bash
# 检查还有多少硬编码
grep -r "https://aicalculator\.pro" app --include="*.tsx" --include="*.ts" | wc -l

# 检查是否正确导入了config/site
grep -r "import.*getUrl.*from.*@/config/site" app --include="*.tsx" | wc -l
```

---

## 📅 建议执行时间表

### 每天修复计划（10批/天）

- **第1天**：第1-10批（金融类前10个 + 1个健康类）
- **第2天**：第11-20批（金融类剩余2个 + 健康类全部 + 数学类前3个）
- **第3天**：第21-30批（数学类剩余14个 + 时间/工具类全部）
- **第4天**：第31-34批（系统页面全部） + 最终验证

**总计4天，每天约2小时工作量**

---

**制定人：** Claude  
**制定时间：** 2024-11-19  
**状态：** 待开始

---

## 🚀 开始第1批修复？

准备好后，回复 "开始第1批" 即可开始修复！

